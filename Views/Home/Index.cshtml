@{
    ViewData["Title"] = "Home";
    var movies = ViewBag.Movies as IEnumerable<MovieTheater.Models.Movie>;
    var promotions = ViewBag.Promotions as IEnumerable<MovieTheater.Models.Promotion>;
    // var trendingMovies = ViewBag.Movies as IEnumerable<MovieTheater.Models.Movie>;
}
<!-- GOOGLE FONTS -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
<!-- OWL CAROUSEL -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
<!-- SWIPER CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
<!-- BOX ICONS -->
<link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
<!-- APP CSS -->
<link rel="stylesheet" href="~/css/grid.css" />
<link rel="stylesheet" href="~/css/app.css" />

<!-- Custom CSS for Swiper -->
<style>
    .nowshowing-swiper .swiper-button-next,
    .nowshowing-swiper .swiper-button-prev {
        color: #ffe066;
        background: rgba(0,0,0,0.18);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
    }
    
    .nowshowing-swiper .swiper-button-next:hover,
    .nowshowing-swiper .swiper-button-prev:hover {
        background: rgba(0,0,0,0.3);
    }
    
    .nowshowing-swiper .swiper-button-next:after,
    .nowshowing-swiper .swiper-button-prev:after {
        font-size: 1.5rem;
    }

    /* Hiệu ứng btn-hover cho các nút */
    .btn-hover {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease-in-out;
    }

    .btn-hover::before {
        z-index: 1;
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 0%; /* Bắt đầu từ 0% cho các nút thường */
        height: 100%;
        background-color: #c0392b;
        transition: 0.3s ease-in-out;
        transform: translateX(-100%); /* Bắt đầu từ bên trái ngoài button */
    }

    .btn-hover:hover::before {
        width: 100%;
        transform: translateX(0); /* Slide vào từ trái */
    }

    /* Hiệu ứng đặc biệt cho button slide 1 (hero section) */
    #slide-hero .btn-hover::before {
        width: 50%; /* Bắt đầu từ 50% cho button slide 1 */
        transform: translateX(0); /* Không cần translate vì đã ở vị trí 50% */
    }

    #slide-hero .btn-hover:hover::before {
        width: 100%;
    }

    .btn-hover i,
    .btn-hover span {
        z-index: 2;
        position: relative;
        transition: color 0.3s ease-in-out;
    }

    /* Đặc biệt cho nút Book Now màu vàng */
    .btn-warning.btn-hover::before {
        background-color: #e6b800;
    }

    .btn-warning.btn-hover:hover {
        color: #222 !important;
        border-color: #e6b800;
    }

    /* Đặc biệt cho nút outline */
    .btn-outline-light.btn-hover::before {
        background-color: #ffe066;
    }

    .btn-outline-light.btn-hover:hover {
        color: #222 !important;
        border-color: #ffe066;
    }

    .btn-outline-warning.btn-hover::before {
        background-color: #ffe066;
    }

    .btn-outline-warning.btn-hover:hover {
        color: #222 !important;
        border-color: #ffe066;
    }

    /* Modern heading MOVIES */
    .modern-movie-heading {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 2.5rem;
        margin-top: 2.5rem;
    }
    .modern-movie-heading span {
        font-family: 'Outfit', 'Poppins', 'Montserrat', Arial, sans-serif;
        font-size: 3.2rem;
        font-weight: 900;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        background: linear-gradient(90deg, #ffe066 10%, #ff6f00 60%, #c0392b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        filter: drop-shadow(0 4px 18px rgba(255, 224, 102, 0.18));
        text-shadow: 0 2px 12px rgba(0,0,0,0.18), 0 1px 0 #fff;
        padding: 0.2em 1.5em;
        border-radius: 18px;
        box-shadow: 0 2px 24px rgba(255,224,102,0.08);
        transition: font-size 0.2s, padding 0.2s;
    }
    @@media (max-width: 900px) {
        .modern-movie-heading span {
            font-size: 2.1rem;
            padding: 0.2em 0.7em;
        }
    }
    @@media (max-width: 600px) {
        .modern-movie-heading span {
            font-size: 1.3rem;
            padding: 0.1em 0.3em;
        }
    }
</style>

<!-- SLIDE 1: HERO + CAROUSEL NỔI BẬT (giữ nguyên như hiện tại, chỉ wrap lại) -->
<section class="slide-section hero-slide" id="slide-hero">
    <div class="hero-section">
        <!-- HERO SLIDE -->
        <div class="hero-slide">
            <div class="owl-carousel carousel-nav-center" id="hero-carousel">
                @foreach (var movie in movies ?? Enumerable.Empty<MovieTheater.Models.Movie>())
                {
                    <div class="hero-slide-item">
                        <img src="@movie.LargeImage" alt="@movie.MovieNameEnglish">
                        <div class="overlay"></div>
                        <div class="hero-slide-item-content">
                            <div class="item-content-wraper">
                                <div class="item-content-title top-down">
                                    @movie.MovieNameEnglish
                                </div>
                                <div class="movie-infos top-down delay-2">
                                    <div class="movie-info">
                                        <i class="bx bxs-star"></i>
                                        <span>9.5</span>
                                    </div>
                                    <div class="movie-info">
                                        <i class="bx bxs-time"></i>
                                        <span>@movie.Duration mins</span>
                                    </div>
                                    <div class="movie-info">
                                        <span>HD</span>
                                    </div>
                                    <div class="movie-info">
                                        <span>16+</span>
                                    </div>
                                </div>
                                <div class="item-content-description top-down delay-4">
                                    @movie.Content
                                </div>
                                <div class="item-action top-down delay-6">
                                    <a href="@Url.Action("Detail", "Movie", new { id = movie.MovieId })" class="btn btn-hover">
                                        <i class="bx bxs-right-arrow"></i>
                                        <span>Book now</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
        <!-- END HERO SLIDE -->
        <!-- TOP MOVIES SLIDE -->
        <div class="top-movies-slide">
            <div class="owl-carousel" id="top-movies-slide">
                @foreach (var movie in movies ?? Enumerable.Empty<MovieTheater.Models.Movie>())
                {
                    <div class="movie-item">
                        <img src="@movie.SmallImage" alt="@movie.MovieNameEnglish">
                        <div class="movie-item-content">
                            <div class="movie-item-title">
                                @movie.MovieNameEnglish
                            </div>
                            <div class="movie-infos">
                                <div class="movie-info">
                                    <i class="bx bxs-star"></i>
                                    <span>9.5</span>
                                </div>
                                <div class="movie-info">
                                    <i class="bx bxs-time"></i>
                                    <span>@movie.Duration mins</span>
                                </div>
                                <div class="movie-info">
                                    <span>HD</span>
                                </div>
                                <div class="movie-info">
                                    <span>16+</span>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
        <!-- END TOP MOVIES SLIDE -->
    </div>
</section>
<!-- SLIDE 2: NOW SHOWING CAROUSEL (CHUYỂN SANG SWIPER) -->
<section class="web-movie-slide desktop" style="background:transparent; min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center;">
    <!-- Heading MOVIES hiện đại, nổi bật, căn giữa toàn section -->
    <div class="modern-movie-heading" style="margin-bottom:0.5rem; margin-top:2.5rem;">
        <span>MOVIES</span>
    </div>
    <div class="movie-showing" style="width:100%; display:flex; flex-direction:column; align-items:center;">
        <div class="container keep-stable" style="width:80%; margin:2.5rem auto; padding:0 10px;">
            <div class="web-movie-content" style="margin-top:2.2rem;">
                <div class="web-movie-list">
                    <!-- Swiper -->
                    <div class="swiper nowshowing-swiper">
                        <div class="swiper-wrapper">
                            @foreach (var movie in movies ?? Enumerable.Empty<MovieTheater.Models.Movie>())
                            {
                                <div class="swiper-slide" style="padding:0 10px;">
                                    <div class="web-movie-box" style="background:#181a20; border-radius:18px; box-shadow:0 4px 24px rgba(0,0,0,0.13); width:100%; max-width:320px; margin:auto; display:flex; flex-direction:column; align-items:center; padding-bottom:18px;">
                                        <a class="image" href="@Url.Action("Detail", "Movie", new { id = movie.MovieId })" style="display:block; width:100%;">
                                            <img src="@movie.SmallImage" alt="@movie.MovieNameEnglish" style="width:100%; height:450px; object-fit:cover; border-radius:18px 18px 0 0;">
                                        </a>
                                        <div class="content" style="width:100%; text-align:center; margin-top:1rem; padding:0 15px;">
                                            <p class="name" style="font-weight:700; font-size:1.1rem; min-height:48px; color:#fff; margin-bottom:0.5rem; line-height:1.3;">@movie.MovieNameEnglish</p>
                                            <div style="display:flex; justify-content:center; gap:0.7rem; font-size:0.97rem; color:#bbb; margin-bottom:0.7rem;">
                                                <div><i class="bx bxs-time"></i> @movie.Duration' </div>
                                                <div>HD</div>
                                                <div>16+</div>
                                            </div>
                                            <div style="display:flex; justify-content:center; gap:0.8rem; flex-wrap:nowrap;">
                                                <a href="#" class="btn btn-outline-light btn-hover" style="font-size:0.9rem; padding:0.4rem 1.2rem; border-radius:6px; border:1.5px solid #ffe066; color:#ffe066; background:transparent; font-weight:600; display:inline-flex; align-items:center; gap:0.3rem; white-space:nowrap; min-width:0;">
                                                    <i class="fa fa-play-circle"></i> <span>Watch Trailer</span>
                                                </a>
                                                <a href="@Url.Action("Detail", "Movie", new { id = movie.MovieId })" class="btn btn-warning btn-hover" style="font-size:0.9rem; padding:0.4rem 1.2rem; border-radius:6px; font-weight:700; color:#222; background:#ffe066; border:none; white-space:nowrap; min-width:0;">
                                                    <span>Book Now</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                        <!-- Add Navigation -->
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                    </div>
                </div>
            </div>
            <div style="text-align:center; margin-top:2.2rem; margin-bottom:2.5rem;">
                <a href="@Url.Action("MovieList", "Movie")" class="btn btn-outline-warning btn-hover" style="font-size:1.1rem; font-weight:700; border-radius:8px; padding:0.5rem 2.2rem; border:2px solid #ffe066; color:#ffe066; background:transparent;">
                    <span>View More</span>
                </a>
            </div>
        </div>
    </div>
</section>
<!-- SLIDE 3: PROMOTION + FOOTER GỘP CHUNG (giữ nguyên) -->
<section class="slide-section promo-footer-slide" id="slide-promo-footer" style="min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; background:var(--box-bg);">
    <div class="container" style="width:85%; max-width:1400px; margin:auto;">
        <div class="section-header" style="margin-bottom:2rem;">PROMOTION</div>
        <div class="owl-carousel movies-slide carousel-nav-center" id="promotion-carousel">
            @foreach (var promo in promotions ?? Enumerable.Empty<MovieTheater.Models.Promotion>())
            {
                <div class="movie-item">
                    <img src="@promo.Image" alt="Promotion">
                    <div class="movie-item-content">
                        <div class="movie-item-title">
                            @promo.Title
                        </div>
                        <div class="movie-infos">
                            <div class="movie-info">
                                <span>@promo.Detail</span>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <!-- Footer nhỏ gọn phía dưới -->
        <footer class="section" style="margin-top:3rem;">
            <div class="container">
                <div class="row">
                    <div class="col-4 col-md-6 col-sm-12">
                        <div class="content">
                            <a href="#" class="logo">
                                <i class='bx bx-movie-play bx-tada main-color'></i>Fl<span class="main-color">i</span>x
                            </a>
                            <p style="font-size:0.95rem;">
                                MovieTheater - Enjoy your movie time!
                            </p>
                        </div>
                    </div>
                    <div class="col-8 col-md-6 col-sm-12">
                        <div class="row">
                            <div class="col-3 col-md-6 col-sm-6">
                                <div class="content">
                                    <p><b>Flix</b></p>
                                    <ul class="footer-menu">
                                        <li><a href="#">About us</a></li>
                                        <li><a href="#">My profile</a></li>
                                        <li><a href="#">Pricing plans</a></li>
                                        <li><a href="#">Contacts</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-3 col-md-6 col-sm-6">
                                <div class="content">
                                    <p><b>Browse</b></p>
                                    <ul class="footer-menu">
                                        <li><a href="#">About us</a></li>
                                        <li><a href="#">My profile</a></li>
                                        <li><a href="#">Pricing plans</a></li>
                                        <li><a href="#">Contacts</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-3 col-md-6 col-sm-6">
                                <div class="content">
                                    <p><b>Help</b></p>
                                    <ul class="footer-menu">
                                        <li><a href="#">About us</a></li>
                                        <li><a href="#">My profile</a></li>
                                        <li><a href="#">Pricing plans</a></li>
                                        <li><a href="#">Contacts</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-3 col-md-6 col-sm-6">
                                <div class="content">
                                    <p><b>Download app</b></p>
                                    <ul class="footer-menu">
                                        <li>
                                            <a href="#">
                                                <img src="~/images/google-play.png" alt="">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <img src="~/images/app-store.png" alt="">
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <div class="copyright" style="margin-top:1rem;">Copyright 2024 <a href="#" target="_blank">Team03</a></div>
    </div>
</section>
@section Scripts {
    <!-- Xóa jQuery vì đã có trong layout -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script src="/js/app.js"></script>
    <script>
        $(document).ready(function() {
            // Khởi tạo Swiper cho slide 2
            const nowshowingSwiper = new Swiper('.nowshowing-swiper', {
                slidesPerView: 1,
                spaceBetween: 16,
                loop: true,
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                breakpoints: {
                    480: {
                        slidesPerView: 1,
                        spaceBetween: 10,
                    },
                    640: {
                        slidesPerView: 2,
                        spaceBetween: 16,
                    },
                    900: {
                        slidesPerView: 3,
                        spaceBetween: 18,
                    },
                    1200: {
                        slidesPerView: 4,
                        spaceBetween: 20,
                    },
                }
            });

            // Giữ nguyên OwlCarousel cho slide 1
            $('#movies-carousel').owlCarousel({
                items: 3,
                margin: 28,
                nav: true,
                dots: true,
                loop: true,
                slideBy: 3,
                navText: [
                    '<span style="font-size:2.1rem; color:#ffe066; background:rgba(0,0,0,0.18); border-radius:50%; padding:0 12px;">&#8249;</span>',
                    '<span style="font-size:2.1rem; color:#ffe066; background:rgba(0,0,0,0.18); border-radius:50%; padding:0 12px;">&#8250;</span>'
                ],
                responsive: {
                    0: { items: 1, slideBy: 1 },
                    600: { items: 2, slideBy: 2 },
                    1000: { items: 3, slideBy: 3 }
                }
            });
        });
    </script>
}
