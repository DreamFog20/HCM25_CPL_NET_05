@{
    ViewData["Title"] = "Home";
    var movies = ViewBag.Movies as IEnumerable<MovieTheater.Models.Movie>;
    var promotions = ViewBag.Promotions as IEnumerable<MovieTheater.Models.Promotion>;
}

<div class="container-xl py-4">
    <!-- Hero Banner (Ä‘á»ƒ trá»‘ng) -->
    <div class="mb-5"></div>

    <!-- Movie Slider -->
    <h2 class="section-title">MOVIE</h2>
    <div class="swiper movie-swiper mb-5">
        <div class="swiper-wrapper">
            @foreach (var movie in movies)
            {
                <div class="swiper-slide">
                    <div class="card movie-card h-100 shadow-sm">
                        <img src="@movie.SmallImage" class="card-img-top" alt="@movie.MovieNameEnglish">
                        <div class="card-body text-center">
                            <h5 class="card-title">@movie.MovieNameEnglish</h5>
                            <a asp-controller="Movie"
                               asp-action="Detail"
                               asp-route-id="@movie.MovieId"
                               class="btn btn-danger mt-2 px-4">
                                Book
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="swiper-pagination movie-pagination"></div>
        <div class="swiper-button-next movie-next"></div>
        <div class="swiper-button-prev movie-prev"></div>
    </div>

    <!-- Promotion Slider -->
    <h2 class="section-title">PROMOTION</h2>
    <div class="swiper promo-swiper mb-5">
        <div class="swiper-wrapper">
            @foreach (var promo in promotions)
            {
                <div class="swiper-slide">
                    <div class="card promo-card h-100 shadow-sm">
                        <img src="@promo.Image" class="card-img-top" alt="Promotion">
                        <div class="card-body text-center">
                            <p class="card-text">@promo.Detail</p>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="swiper-pagination promo-pagination"></div>
        <div class="swiper-button-next promo-next"></div>
        <div class="swiper-button-prev promo-prev"></div>
    </div>
</div>

@section Scripts {
    <script>
        var movieSwiper = new Swiper('.movie-swiper', {
            effect: 'coverflow',
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: 4,
            spaceBetween: 30,
            coverflowEffect: {
                rotate: 30,
                stretch: 0,
                depth: 200,
                modifier: 1,
                slideShadows: true,
            },
            navigation: {
                nextEl: '.movie-next',
                prevEl: '.movie-prev',
            },
            pagination: {
                el: '.movie-pagination',
                clickable: true,
            },
            breakpoints: {
                0: { slidesPerView: 1 },
                576: { slidesPerView: 2 },
                992: { slidesPerView: 4 }
            }
        });

        // ðŸ‘‡ ThÃªm Ä‘oáº¡n nÃ y Ä‘á»ƒ click vÃ o áº£nh => chuyá»ƒn slide
        document.querySelectorAll('.movie-swiper .swiper-slide').forEach((slide, index) => {
            slide.addEventListener('click', () => {
                movieSwiper.slideTo(index);
            });
        });

        var promoSwiper = new Swiper('.promo-swiper', {
            slidesPerView: 4,
            spaceBetween: 30,
            navigation: {
                nextEl: '.promo-next',
                prevEl: '.promo-prev',
            },
            pagination: {
                el: '.promo-pagination',
                clickable: true,
            },
            breakpoints: {
                0: { slidesPerView: 1 },
                576: { slidesPerView: 2 },
                992: { slidesPerView: 4 }
            }
        });
    </script>
}

<style>
body {
    background: #f8f9fa;
}
.section-title {
    font-family: 'Montserrat', monospace;
    font-size: 2.2rem;
    letter-spacing: 2px;
    font-weight: bold;
    color: #e50914;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-bottom: 32px;
}
.section-title:before, .section-title:after {
    content: '';
    flex: 1;
    border-bottom: 2px solid #e50914;
    margin: 0 16px;
    opacity: 0.2;
}
.swiper {
    padding-bottom: 40px;
}
.movie-card, .promo-card {
    border-radius: 18px;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
    background: #fff;
    box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    border: none;
}
.movie-card:hover, .promo-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 8px 32px rgba(229,9,20,0.18);
}
.card-img-top {
    height: 340px;
    object-fit: cover;
    border-bottom: 1px solid #eee;
    background: #f2f2f2;
}
.promo-card .card-img-top {
    height: 180px;
}
.card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #222;
    margin-bottom: 0.5rem;
}
.card-text {
    font-size: 1rem;
    color: #444;
}
.btn-danger {
    background: #e50914;
    border: none;
    font-weight: 600;
    border-radius: 8px;
    transition: background 0.2s;
}
.btn-danger:hover {
    background: #b0060f;
}
.swiper-button-next, .swiper-button-prev {
    color: #fff;
    background: #e50914;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
    width: 48px;
    height: 48px;
    top: 45%;
    opacity: 0.95;
    transition: background 0.2s;
}
.swiper-button-next:hover, .swiper-button-prev:hover {
    background: #b0060f;
}
.swiper-button-next:after, .swiper-button-prev:after {
    font-size: 1.7rem;
    font-weight: bold;
}
.swiper-pagination-bullet {
    background: #e50914;
    opacity: 0.4;
}
.swiper-pagination-bullet-active {
    background: #e50914;
    opacity: 1;
}
</style>