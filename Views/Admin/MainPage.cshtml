@{
    ViewData["Title"] = "Admin Main Page";
}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 min-vh-100 border-end" id="account-sidebar">
            <ul class="nav flex-column nav-pills" id="adminTabs">
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "Dashboard" ? "active" : "text-dark")" data-tab="Dashboard" href="#">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "MemberMg" ? "active" : "text-dark")" data-tab="MemberMg" href="#">Member Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "EmployeeMg" ? "active" : "text-dark")" data-tab="EmployeeMg" href="#">Employee Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "MovieMg" ? "active" : "text-dark")" data-tab="MovieMg" href="#">Movie Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "ShowroomMg" ? "active" : "text-dark")" data-tab="ShowroomMg" href="#">Showroom Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "ScheduleMg" ? "active" : "text-dark")" data-tab="ScheduleMg" href="#">Schedule Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "PromotionMg" ? "active" : "text-dark")" data-tab="PromotionMg" href="#">Promotion Management</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link @(ViewData["ActiveTab"]?.ToString() == "BookingMg" ? "active" : "text-dark")" data-tab="BookingMg" href="#">Booking Management</a>
                </li>
            </ul>
        </div>

        <!-- Tab Content -->
        <div class="col-md-9 col-lg-10 p-4">
            <div id="tabContent">
                Loading...
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Function to load tab content
        function loadTab(tabName, keyword = '') {
            // Show loading
            $('#tabContent').html('Loading...');

            // Update active tab
            $('#adminTabs .nav-link').removeClass('active');
            $(`#adminTabs .nav-link[data-tab="${tabName}"]`).addClass('active');

            const params = new URLSearchParams({ tab: tabName });
            if (keyword.trim()) {
                params.append('keyword', keyword);
            }

            $('#tabContent').load(`/Admin/LoadTab?${params.toString()}`);
        }

        function searchEmployees() {
            const keyword = document.getElementById('searchKeyword')?.value ?? '';
            loadTab('EmployeeMg', keyword);
        }

        function searchBooking() {
            const keyword = document.getElementById('searchKeyword')?.value ?? '';
            loadTab('BookingMg', keyword);
        }

        $(document).ready(function () {
            // Handle tab clicks
            $('#adminTabs .nav-link').click(function (e) {
                e.preventDefault();
                loadTab($(this).data('tab'));
            });

            // Load initial tab
            var tabToLoad = '@ViewData["ActiveTab"]' || 'Dashboard';
            loadTab(tabToLoad);
        });
    </script>
}

<partial name="_ToastMessages" />
